!function(){var e={f:{},m:{},r:function(t){var s=e.m[t];if(s)return s.m.exports;var i=e.f[t];return i?((s=e.m[t]={}).exports={},s.m={exports:s.exports},i(s.m,s.exports),s.m.exports):void 0}};e.f[0]=function(t,s){Object.defineProperty(s,"__esModule",{value:!0});var i=e.r("tslib");i.__exportStar(e.r(1),s),i.__exportStar(e.r(2),s),i.__exportStar(e.r(3),s),i.__exportStar(e.r(4),s),i.__exportStar(e.r(5),s),i.__exportStar(e.r(6),s),i.__exportStar(e.r(7),s)},e.f[1]=function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),(t.CrosswordFeedback||(t.CrosswordFeedback={})).clue="clue"},e.f[2]=function(e,t){var s;Object.defineProperty(t,"__esModule",{value:!0}),(s=t.CrosswordEvents||(t.CrosswordEvents={})).onClueCompleted="crossword:clue",s.onSolved="crossword:solved"},e.f[3]=function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var s=function(){return function(){}}();t.CrosswordCellRegistry=s},e.f[4]=function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(){this.cellsElements=[],this.fieldsElements=[],this.cellsRegistries=[],this.currentAnswer=[],this.isCompleted=!1}return Object.defineProperty(e.prototype,"cellsAsJquery",{get:function(){return this._$cells||(this._$cells=$($.map(this.cellsElements,function(e){return e.get(0)}))),this._$cells},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fieldsAsJquery",{get:function(){return this._$fields||(this._$fields=$($.map(this.fieldsElements,function(e){return e.get(0)}))),this._$fields},enumerable:!0,configurable:!0}),e}();t.CrosswordClueRegistry=s},e.f[5]=function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var s=function(){return function(){}}();t.CrosswordRowRegistry=s},e.f[6]=function(t,s){Object.defineProperty(s,"__esModule",{value:!0});var i=e.r("crossword-definition"),o=e.r(1),r=e.r(4),n=e.r(3),l=e.r(5),c=e.r(2),a=function(){function e(){this.cluesRegistry={}}return e.prototype.disable=function(){this._super(),this.element.addClass(this.options.classes.disabled);var e=this.cluesRegistry;for(var t in e){e[t].fieldsAsJquery.prop("disabled",!0)}},e.prototype.enable=function(){this._super(),this.element.removeClass(this.options.classes.disabled);var e=this.cluesRegistry;for(var t in e){e[t].fieldsAsJquery.prop("disabled",!1)}},e.prototype.goToCell=function(e,t){var s,i,o;if("number"==(typeof e).toLowerCase()){var r=this.rowsRegistry[e];r&&(i=(s=r.cellsRegistry[t]).definition)}else i=(s=e).definition;return s&&i.light&&s!=this.registryCellActive&&(i.acrossClue&&i.downClue&&(0==i.acrossClueLetterIndex?o=i.acrossClue:0==i.downClueLetterIndex&&(o=i.downClue)),this.registryActive?(this.registryCellActive.element.removeClass(this.options.classes.cellActive),o=this.registryActive.definition==i.acrossClue?i.acrossClue:this.registryActive.definition==i.downClue?i.downClue:this._getDefinitionForClosestToFirstLetter(s.definition)):o=this._getDefinitionForClosestToFirstLetter(s.definition),this.registryCellActive=s,s.element.addClass(this.options.classes.cellActive),this._activateClue(o),s.field.is(":focus")||s.field.trigger("focus")),s},e.prototype.clearActive=function(){this.registryActive&&(this.registryActive=null,this.element.find("."+this.options.classes.clueActive).removeClass(this.options.classes.clueActive),this.registryCellActive.element.removeClass(this.options.classes.cellActive),this.registryCellActive=null)},e.prototype.goToCellAbove=function(){if(this.registryCellActive){var e=this._getCellFor(this.registryCellActive,!0,!1);e&&this.goToCell(e)}},e.prototype.goToCellBelow=function(){if(this.registryCellActive){var e=this._getCellFor(this.registryCellActive,!0,!0);e&&this.goToCell(e)}},e.prototype.goToCellRight=function(){if(this.registryCellActive){var e=this._getCellFor(this.registryCellActive,!1,!0);e&&this.goToCell(e)}},e.prototype.goToCellLeft=function(){if(this.registryCellActive){var e=this._getCellFor(this.registryCellActive,!1,!1);e&&this.goToCell(e)}},e.prototype.goToNextWord=function(){if(this.registryCellActive){var e=this._getNextOrPrevClueFrom(this.registryCellActive,!0);this.cluesRegistry[e.code].fieldsElements[0].trigger("focus")}},e.prototype.goToPrevWord=function(){if(this.registryCellActive){var e=this._getNextOrPrevClueFrom(this.registryCellActive,!1);this.cluesRegistry[e.code].fieldsElements[0].trigger("focus")}},e.prototype.checkClue=function(e){var t;if(e=e||this.registryActive){var s=e.isCompleted;if(e.isCompleted=e.currentAnswer.join("").length===e.definition.answer.length,e.isCompleted){for(var i=0,o=e.cellsRegistries,r=0,n=o;r<n.length;r++){var l=n[r];this._checkCellAnswer(l)&&i++}e.isCorrect=i==o.length,this.updateClueStateClass(e),t=e.isCorrect}else e.isCorrect=!1,this.updateClueStateClass(e);s!=e.isCompleted&&this.element.trigger(c.CrosswordEvents.onClueCompleted,[{instance:this,isCorrect:e.isCorrect,isCompleted:!1,definition:e.definition}])}return t},e.prototype.check=function(){var e=this.cluesRegistry,t=0;for(var s in e){if(!e[s].isCorrect)break;t++}t==Object.keys(e).length&&this.element.trigger(c.CrosswordEvents.onSolved,[this])},e.prototype.solve=function(){var e=this.cluesRegistry;for(var t in e)for(var s=0,i=e[t].cellsRegistries;s<i.length;s++){var o=i[s];o.field.val(o.definition.answer)}this.element.trigger(c.CrosswordEvents.onSolved,[this])},e.prototype._getCreateOptions=function(){return{namespace:"jq-crossword",classes:{root:"c-crossword",board:"c-crossword__board",row:"c-crossword__row",cell:"c-crossword__cell",cellActive:"c-crossword__cell--active",cellCorrect:"c-crossword__cell--correct",cellIncorrect:"c-crossword__cell--incorrect",clue:"c-crossword__clue",clueActive:"c-crossword__clue--active",clueCorrect:"c-crossword__clue--correct",clueIncorrect:"c-crossword__clue--incorrect",light:"c-crossword__clue--light",hint:"c-crossword__clue--hint",field:"c-crossword__clue__field",firstLetter:"c-crossword__cell--first-letter",firstLetterAcross:"c-crossword__cell--first-letter-across",firstLetterDown:"c-crossword__cell--first-letter-down",listItem:"c-crossword__list-item",cluesListContainer:"c-crossword__clues",cluesListTitle:"c-crossword__clues__title",clueList:"c-crossword__clues__list",disabled:"c-crossword--disabled"},downListTitle:"Down clues",acrossListTitle:"Across clues",ignoreCase:!0,feedback:o.CrosswordFeedback.clue}},e.prototype._checkCellAnswer=function(e){return e.field.val()&&(this.options.ignoreCase?e.isCorrect=new RegExp(e.definition.answer,"i").test(e.currentAnswer):e.isCorrect=e.currentAnswer==e.definition.answer),e.isCorrect},e.prototype._create=function(){this.element.addClass(this.options.classes.root),this._createDefinition(),this.cluesRegistry=this._createClueRegistry(),this._construct(),this._createCluesLists(),this._addEvents()},e.prototype._addEvents=function(){this.element.on("focus."+this.options.namespace,"."+this.options.classes.field,this._onFieldFocus.bind(this)),this.element.on("blur."+this.options.namespace,"."+this.options.classes.field,this._onFieldBlur.bind(this)),this.element.on("input."+this.options.namespace,"."+this.options.classes.field,this._onFieldChange.bind(this)),this.element.on("keydown."+this.options.namespace,"."+this.options.classes.field,this._onFieldKey.bind(this)),this.element.on("click."+this.options.namespace,"."+this.options.classes.listItem,this._onListItemClick.bind(this))},e.prototype.updateClueStateClass=function(e){if(e.isCompleted){var t=e.isCorrect?this.options.classes.clueCorrect:this.options.classes.clueIncorrect,s=e.isCorrect?this.options.classes.clueIncorrect:this.options.classes.clueCorrect;e.listItem.removeClass(s).addClass(t),e.cellsAsJquery.removeClass(s).addClass(t)}else{for(var i=0,o=e.cellsRegistries;i<o.length;i++){var r=o[i];r.acrossClueRegistry&&r.downClueRegistry&&(r.acrossClueRegistry.isCompleted||r.downClueRegistry.isCompleted)||r.element.removeClass([this.options.classes.clueCorrect,this.options.classes.clueIncorrect])}e.listItem.removeClass([this.options.classes.clueCorrect,this.options.classes.clueIncorrect])}},e.prototype._onListItemClick=function(e){if(this.options.disabled)e.preventDefault();else{this.interaction=!0;var t=$(e.target),s=t.data("down"),i=t.data("across"),o=void 0;o=s?this.cluesRegistry[s].cellsRegistries[0]:this.cluesRegistry[i].cellsRegistries[0],this.goToCell(o),this.interaction=!1}},e.prototype._getDefinitionForClosestToFirstLetter=function(e){return e.acrossClue&&e.downClue?e.acrossClueLetterIndex<=e.downClueLetterIndex?e.acrossClue:e.downClue:e.acrossClue||e.downClue},e.prototype._onFieldFocus=function(e){if(this.options.disabled)e.preventDefault();else{this.interaction=!0;var t=$(e.target).parents("."+this.options.classes.cell).first(),s=t.data("x"),i=t.data("y");this.goToCell(i,s),this.interaction=!1}},e.prototype._onFieldBlur=function(e){this.interaction||this.clearActive()},e.prototype._storeAndCheckAnswer=function(e,t){if(t.currentAnswer=e,t.definition.acrossClue){var s=this.cluesRegistry[t.definition.acrossClue.code],i=t.definition.acrossClueLetterIndex;s.currentAnswer[i]=e,this.options.feedback===o.CrosswordFeedback.clue&&this.checkClue(s)}if(t.definition.downClue){s=this.cluesRegistry[t.definition.downClue.code],i=t.definition.downClueLetterIndex;s.currentAnswer[i]=e,this.options.feedback===o.CrosswordFeedback.clue&&this.checkClue(s)}this.check()},e.prototype._onFieldChange=function(e){if(this.options.disabled)e.preventDefault();else{this.interaction=!0;var t=this.registryCellActive.field.val();if(!this.registryActive){var s=$(e.target).parents("."+this.options.classes.cell).first(),i=s.data("x"),o=s.data("y");this.goToCell(o,i)}this._storeAndCheckAnswer(t,this.registryCellActive),t?this.registryActive.definition.across?this.goToCellRight():this.goToCellBelow():this.registryActive.definition.across?this.goToCellLeft():this.goToCellAbove(),this.interaction=!1}},e.prototype._activateClue=function(e){var t=this.cluesRegistry[e.code];t&&t!=this.registryActive&&(this.registryActive=t,this.element.find("."+this.options.classes.clueActive).removeClass(this.options.classes.clueActive),t.cellsAsJquery.addClass(this.options.classes.clueActive),t.listItem.addClass(this.options.classes.clueActive))},e.prototype._getNextOrPrevClueFrom=function(e,t){var s,i,o,r,n,l,c=e.definition;if(c.acrossClue&&c.downClue){var a=this._getDefinitionForClosestToFirstLetter(e.definition);i=a.across,o=a}else i=void 0!=c.acrossClue,o=i?c.acrossClue:c.downClue;if(r=i?c.crossword.acrossClues:c.crossword.downClues,n=i?c.crossword.downClues:c.crossword.acrossClues,-1!=(l=r.findIndex(function(e){return e.number===o.number}))){l+=t?1:-1;s=t&&l<r.length||!t&&l>=0?r[l]:t?n[0]:n.slice(-1)[0]}return s},e.prototype._getCellFor=function(e,t,s){var i,o=e.definition,r=o.x,n=o.y,l=t?s?n+1:n-1:n,c=t?r:s?r+1:r-1,a=this.rowsRegistry[l];if(a){var d=a.cellsRegistry[c];d&&d.definition.light&&(i=d.definition.hint?this._getCellFor(d,t,s):d)}return i},e.prototype._onFieldKey=function(e){if(this.options.disabled)e.preventDefault();else{this.interaction=!0;var t=$(e.target).parents("."+this.options.classes.cell).first(),s=t.data("x"),i=t.data("y"),o=this.rowsRegistry[i].cellsRegistry[s];switch(e.which){case $.ui.keyCode.SPACE:e.preventDefault();break;case $.ui.keyCode.ENTER:case $.ui.keyCode.TAB:e.preventDefault(),e.shiftKey?this.goToPrevWord():this.goToNextWord();break;case $.ui.keyCode.UP:this.goToCellAbove();break;case $.ui.keyCode.RIGHT:this.goToCellRight();break;case $.ui.keyCode.DOWN:this.goToCellBelow();break;case $.ui.keyCode.LEFT:this.goToCellLeft();break;case $.ui.keyCode.BACKSPACE:e.preventDefault(),o.field.val("").trigger("input");break;default:1==e.key.length&&(e.preventDefault(),o.field.val(e.key).trigger("input"))}this.interaction=!1}},e.prototype._createBoard=function(){return"function"==(typeof this.options.createBoard).toLowerCase()?this.options.createBoard.apply(this,arguments):$('<table class="'+this.options.classes.board+'"></table>')},e.prototype._createRow=function(e){return"function"==(typeof this.options.createRow).toLowerCase()?this.options.createRow.apply(this,arguments):$('<tr class="'+this.options.classes.row+'" data-row="'+e+'"></tr>')},e.prototype._createCell=function(e){return"function"==(typeof this.options.createCell).toLowerCase()?this.options.createCell.apply(this,arguments):$('<td class="'+this.options.classes.cell+'"></td>')},e.prototype._createCellField=function(e){return"function"==(typeof this.options.createCellField).toLowerCase()?this.options.createCellField.apply(this,arguments):$('<input maxlength="1" tabindex="-1">')},e.prototype._createCluesListContainer=function(e){return"function"==(typeof this.options.createCluesListContainer).toLowerCase()?this.options.createCluesListContainer.apply(this,arguments):$('\n                <div class="'+this.options.classes.cluesListContainer+'">\n                    <p class="'+this.options.classes.cluesListTitle+'">'+(e?this.options.acrossListTitle:this.options.downListTitle)+"</p>\n                </div>\n            ")},e.prototype._createCluesList=function(e){return"function"==(typeof this.options.createCluesList).toLowerCase()?this.options.createCluesList.apply(this,arguments):$('<ul class="'+this.options.classes.clueList+'"></ul>')},e.prototype._createCluesListItem=function(e){return"function"==(typeof this.options.createCluesListItem).toLowerCase()?this.options.createCluesListItem.apply(this,arguments):$("<li></li>")},e.prototype._createDownCluesList=function(){var e=this.definition.downClues;this.downCluesContainer=this._createCluesListContainer(!1),this.downCluesList=this._createCluesList(!1);for(var t=0,s=e;t<s.length;t++){var i=s[t],o=this._createCluesListItem(i);this._addInfoToListElement(o,i),this.downCluesList.append(o),this.cluesRegistry[i.code].listItem=o}this.downCluesContainer&&this.downCluesContainer.append(this.downCluesList)},e.prototype._createAcrossCluesList=function(){var e=this.definition.acrossClues;this.acrossCluesContainer=this._createCluesListContainer(!0),this.acrossCluesList=this._createCluesList(!0);for(var t=0,s=e;t<s.length;t++){var i=s[t],o=this._createCluesListItem(i);this._addInfoToListElement(o,i),this.acrossCluesList.append(o),this.cluesRegistry[i.code].listItem=o}this.acrossCluesContainer&&this.acrossCluesContainer.append(this.acrossCluesList)},e.prototype._createCluesLists=function(){this._createAcrossCluesList(),this._createDownCluesList(),this.options.acrossListAppendTo?this.acrossCluesContainer?$(this.options.acrossListAppendTo).append(this.acrossCluesContainer):$(this.options.acrossListAppendTo).append(this.acrossCluesList):this.element.append(this.acrossCluesContainer),this.options.downListAppendTo?this.downCluesContainer?$(this.options.downListAppendTo).append(this.downCluesContainer):$(this.options.downListAppendTo).append(this.downCluesList):this.element.append(this.downCluesContainer)},e.prototype._addInfoToListElement=function(e,t){e.addClass(this.options.classes.listItem),t.across?(e.addClass(this.options.classes.clue+"--"+t.code),e.attr("data-across",t.code)):(e.addClass(this.options.classes.clue+"--"+t.code),e.attr("data-down",t.code)),e.text(t.clue)},e.prototype._addInfoToCellElement=function(e,t){e.attr({"data-x":t.x,"data-y":t.y}),(t.acrossClue||t.downClue)&&e.addClass(this.options.classes.clue),t.clueLabel&&(e.addClass(this.options.classes.firstLetter),0==t.acrossClueLetterIndex&&e.addClass(this.options.classes.firstLetterAcross),0==t.downClueLetterIndex&&e.addClass(this.options.classes.firstLetterDown)),t.acrossClue&&(e.addClass(this.options.classes.clue+"--"+t.acrossClue.code),e.attr("data-across",t.acrossClue.number)),t.downClue&&(e.addClass(this.options.classes.clue+"--"+t.downClue.code),e.attr("data-down",t.downClue.number)),t.light&&(e.addClass(this.options.classes.light),t.hint&&e.addClass(this.options.classes.hint))},e.prototype._createClueRegistry=function(){for(var e={},t=this.definition,s=t.acrossClues.concat(t.downClues),i=0,o=s.length;i<o;i++){var n=s[i],l=new r.CrosswordClueRegistry;l.definition=n,l.currentAnswer=new Array(n.answer.length),e[n.code]=l}return e},e.prototype._construct=function(){if(this.definition){for(var e=this.definition.matrix,t=this._createBoard(),s=[],i=this.cluesRegistry,o=0,r=e.length;o<r;o++){var c=e[o],a=void 0,d=[],u=[],h=new l.CrosswordRowRegistry;h.cellsRegistry=u;for(var p=0,C=c.length;p<C;p++){var f=c[p],g=this._createCell(f),y=new n.CrosswordCellRegistry,v=void 0;if(y.rowRegistry=h,this._addInfoToCellElement(g,f),y.definition=f,y.element=g,f.light)if(f.hint){if(g.text(f.answer),f.acrossClue)(w=i[f.acrossClue.code]).currentAnswer[f.acrossClueLetterIndex]=f.answer;if(f.downClue)(w=i[f.downClue.code]).currentAnswer[f.downClueLetterIndex]=f.answer}else{var w;if((v=this._createCellField(f)).addClass(this.options.classes.field),y.field=v,g.append(v),f.acrossClue)(w=i[f.acrossClue.code]).cellsElements.push(g),w.fieldsElements.push(v),w.cellsRegistries.push(y),y.acrossClueRegistry=w;if(f.downClue)(w=i[f.downClue.code]).cellsElements.push(g),w.fieldsElements.push(v),w.cellsRegistries.push(y),y.downClueRegistry=w}d.push(g),u[p]=y}(a=this._createRow(o))?(h.element=a,a.append(d),t.append(a)):t.append(d),s.push(h)}this.rowsRegistry=s,this.element.append(t)}},e.prototype._createDefinition=function(){var e=this.options.definition;e&&(e instanceof i.CrosswordDefinition!=!0&&(e=new i.CrosswordDefinition(e)),this.definition=e)},e}();s.CrosswordGame=a},e.f[7]=function(t,s){Object.defineProperty(s,"__esModule",{value:!0});var i=e.r(6);$.widget("ui.crossword",i.CrosswordGame.prototype)};var t=e.r(0);if(t)for(var s in t)window[s]=t[s]}();